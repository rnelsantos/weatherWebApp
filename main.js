(()=>{"use strict";function e(e,t=!1){const a=e,c="light"===e?"dark":"light",s=document.documentElement;s.classList.add(a),s.classList.remove(c),t&&localStorage.setItem("preferred-theme",e)}const t=document.getElementById("toggle-input"),a=document.getElementById("light-icon"),c=document.getElementById("dark-icon");function s(e){t.checked="light"===e,"dark"===e?(a.classList.add("hide"),c.classList.remove("hide")):(c.classList.add("hide"),a.classList.remove("hide"))}t.addEventListener("click",(()=>{const a=t.checked?"light":"dark";e(a,!0),s(a)}));const r=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",o=localStorage.getItem("preferred-theme")||r;e(o,!1),s(o);const d=document.querySelector(".navIcon"),l=document.querySelector("main");let i="closed";d.addEventListener("click",(()=>{"closed"===i?(l.classList.add("showPanel"),i="open"):(l.classList.remove("showPanel"),i="closed")}));const n=document.querySelector(".addTask"),u=document.querySelector(".addTask-form"),p=document.querySelector(".Xcancel");n.addEventListener("click",(()=>{console.log("hi"),null!==selectedProjectID?(n.classList.add("hide"),u.classList.remove("hide")):alert("Select A Project")})),p.addEventListener("click",(()=>{u.classList.add("hide"),n.classList.remove("hide")}));const m=document.querySelector(".addProject"),y=document.querySelector(".addProjectForm"),L=document.querySelector(".ProjectCancel");m.addEventListener("click",(()=>{m.classList.add("hide"),y.classList.remove("hide")})),L.addEventListener("click",(()=>{m.classList.remove("hide"),y.classList.add("hide")}));const h="project.lists";let v=JSON.parse(localStorage.getItem(h))||[];const k="project.selected.list";let j=null;function S(){localStorage.setItem(h,JSON.stringify(v)),localStorage.setItem(k,JSON.stringify(j))}function D(e){return{projectName:e,ID:Date.now().toString(),taskArray:[]}}j=JSON.parse(localStorage.getItem(k));const g=document.querySelector("#task-template"),E=document.querySelector("[data-task-container]"),f={clearElements:e=>{for(;e.firstElementChild;)e.removeChild(e.firstElementChild)},projectListDisplay:()=>{f.clearElements(C),v.forEach((e=>{const t=document.createElement("li");t.dataset.listID=e.ID,t.classList.add("menuBar");const a=document.createElement("p");if(a.innerText=e.projectName,t.appendChild(a),e.ID==j){t.classList.add("active-project");const c=document.createElement("i");c.classList.add("fa-solid"),c.classList.add("fa-pen-to-square"),c.classList.add("projectEditIcon"),t.appendChild(c),a.classList.add("activeTitle"),f.displayActiveTitle(e.projectName),f.taskListDisplay(e)}C.appendChild(t)}))},displayActiveTitle:e=>{const t=document.querySelector("#currentActiveTitle");t.innerText="",t.innerText=e},taskListDisplay:e=>{f.clearElements(E),e.taskArray.forEach((e=>{const t=document.importNode(g.content,!0),a=t.querySelector("input"),c=t.querySelector("label"),s=t.querySelector(".date"),r=t.querySelector(".prio"),o=t.querySelector(".taskDetails"),d=t.querySelector(".taskDetails-Container");a.id=e.ID,a.checked=e.complete,c.setAttribute("for",e.ID),c.append(e.TaskName),o.append(e.details),null===o&&o.append("do details provide"),s.append("Due Date: "+e.dueDate),r.append(e.priority.toUpperCase()),"low"===e.priority&&(r.style.color="lightgreen"),"mid"===e.priority&&(r.style.color="orange"),"high"===e.priority&&(r.style.color="red"),d.append(o),d.append(s),d.append(r),E.appendChild(t)}))}},q=document.querySelector("[data-new-project-input]"),I=document.querySelector("[data-new-project-form]"),C=document.querySelector("[data-project-list]"),P=document.querySelector("[data-new-taskName-input]"),N=document.querySelector("[data-new-taskDetails-input]"),T=document.querySelector("[data-new-taskDate-input]"),w=document.querySelector("[data-new-prio-input]"),A=document.querySelector("[input-add-task-button]");f.projectListDisplay(C);const b=(A.addEventListener("click",(e=>{console.log("add task log");const t=P.value;if(null==t||""===t)return;const a=N.value;priority=w.value,date=T.value.toString(),((e,t,a,c)=>{const s=function(e,t,a,c){return{TaskName:e,details:t,dueDate:a,priority:c,ID:Date.now().toString(),complete:!1}}(e,t,a,c);v.find((e=>e.ID===j)).taskArray.push(s),S(),f.projectListDisplay(C),console.log(v),addTaskForm.classList.add("hide"),addTask.classList.remove("hide")})(t,a,date,priority),P.value=null,S(),f.projectListDisplay(C),w.value="",T.value=null,N.value=null,addProjectBTN.classList.remove("hide"),addProjectForm.classList.add("hide")})),I.addEventListener("submit",(e=>{e.preventDefault();const t=q.value;if(null==t||""===t)return;const a=D(t);q.value=null,v.push(a),S(),f.projectListDisplay(C),addProjectBTN.classList.remove("hide"),addProjectForm.classList.add("hide")})),I.addEventListener("submit",(e=>{e.preventDefault();const t=q.value;if(null==t||""===t)return;const a=D(t);q.value=null,v.push(a),S(),f.projectListDisplay(C),addProjectBTN.classList.remove("hide"),addProjectForm.classList.add("hide")})),C.addEventListener("click",(e=>{"li"!==e.target.tagName.toLowerCase()&&"p"!==e.target.tagName.toLowerCase()||(j=e.target.closest("li").dataset.listID,S(),f.projectListDisplay(),b.listenEditProject())})),document.querySelector("[data-task-container]").addEventListener("click",(e=>{"input"===e.target.tagName.toLowerCase()&&(v.find((e=>j===e.ID)).taskArray.find((t=>t.ID===e.target.closest("input").id)).complete=e.target.checked,S(),f.projectListDisplay())})),document.querySelector("[delete-completed-BTN]").addEventListener("click",(e=>{const t=v.find((e=>j===e.ID));t.taskArray=t.taskArray.filter((e=>!1===e.complete)),S(),f.projectListDisplay()})),{listenEditProject:()=>{const e=document.querySelector(".active-project"),t=document.querySelector(".projectEditIcon"),a=document.querySelector(".activeTitle");t.addEventListener("click",(c=>{e.removeChild(t);const s=document.createElement("i");s.classList.add("fa-solid"),s.classList.add("fa-trash-can"),s.classList.add("ProjectDeleteIcon");const r=document.createElement("i");r.classList.add("fa-solid"),r.classList.add("fa-xmark"),r.classList.add("ProjectCancelIcon"),e.removeChild(a);const o=document.createElement("form");o.setAttribute("action","");const d=document.createElement("input");d.setAttribute("type","input"),d.classList.add("addProject-input"),d.value=a.textContent,e.appendChild(o),o.appendChild(d),e.appendChild(s),e.appendChild(r),o.addEventListener("submit",(e=>{e.preventDefault(),v.forEach((e=>{e.ID===j&&(e.projectName=d.value)})),S(),f.projectListDisplay()})),s.addEventListener("click",(e=>{confirm("Are you sure you want to delete this Project?")&&(v=v.filter((e=>e.ID!==j)),j=null,S(),f.projectListDisplay())})),r.addEventListener("click",(e=>{S(),f.projectListDisplay(),b.listenEditProject()}))}))}});null!==j&&b.listenEditProject()})();